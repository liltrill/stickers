{"version":3,"sources":["panels/home.js","panels/stickers.js","App.js","index.js"],"names":["home","props","react_default","a","createElement","Panel_default","id","PanelHeaderSimple_default","Cell_default","onClick","this","getInfoSticker","before","smile_outline_default","fill","stickers","left","PanelHeaderBack_default","window","history","back","Input_default","placeholder","onChange","e","className","value","state","sticker_id","Button_default","size","mode","style","width","src","sticker_info","photo_140","product","title","price_buy_str","purchase_details","author","description","alt","photo_592","sticker","scheme","result","i","length","push","key","images","url","stickers_scroll","Div_default","component","target","href","share_outline_default","eruda","init","parsedHash","require","parse","location","hash","App","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","goBack","pop","setStartPosition","setState","activePanel","popout","closePopout","bind","assertThisInitialized","name","currentTarget","defineProperty","redirect","_this2","es6","sticker_for_fetch","fetch","then","data","json","response","count","items","goToPage","errorAlert","text","actionsLayout","actions","autoclose","onClose","page","pushState","panel","concat","toConsumableArray","link","connect","send","_this3","subscribe","_ref","_ref$detail","detail","type","SetScheme","addEventListener","arguments","undefined","console","log","status_bar_style","action_bar_color","isWebView","onSwipeBack","header","position","top","panels_home","panels_stickers","React","Component","root","document","getElementById","platform","IOS","mVKMiniAppsScrollHelper","ReactDOM","render","src_App"],"mappings":"wWAiBeA,EATF,SAAAC,GAAK,OACdC,EAAAC,EAAAC,cAACC,EAAAF,EAAD,CAAOG,GAAIL,EAAMK,IACbJ,EAAAC,EAAAC,cAACG,EAAAJ,EAAD,2EAGAD,EAAAC,EAAAC,cAACI,EAAAL,EAAD,CAAMM,QAAS,kBAAMR,EAAMS,KAAKC,gBAAe,IAAOC,OAAQV,EAAAC,EAAAC,cAACS,EAAAV,EAAD,CAAoBW,KAAK,aAAvF,qICQR,IAoCeC,EApCE,SAAAd,GAAK,OAClBC,EAAAC,EAAAC,cAACC,EAAAF,EAAD,CAAOG,GAAIL,EAAMK,IACbJ,EAAAC,EAAAC,cAACG,EAAAJ,EAAD,CACIa,KAAMd,EAAAC,EAAAC,cAACa,EAAAd,EAAD,CAAiBM,QAAS,kBAAMS,OAAOC,QAAQC,WADzD,YAKAlB,EAAAC,EAAAC,cAACiB,EAAAlB,EAAD,CAAOmB,YAAY,2FAAqBhB,GAAG,aAAaiB,SAAU,SAACC,GAAD,OAAOvB,EAAMS,KAAKa,SAASC,IAAIC,UAAU,gBAAgBC,MAAOzB,EAAMS,KAAKiB,MAAMC,aACnJ1B,EAAAC,EAAAC,cAACyB,EAAA1B,EAAD,CAAQM,QAAS,kBAAMR,EAAMS,KAAKC,kBAAkBc,UAAU,gBAAgBK,KAAK,KAAKC,KAAK,aAA7F,0DACA7B,EAAAC,EAAAC,cAAA,OAAK4B,MAAO,CAACC,MAAO,SAChB/B,EAAAC,EAAAC,cAAA,OAAKqB,UAAU,eAAeS,IAC1BjC,EAAMS,KAAKiB,MAAMQ,aAAaC,YAElClC,EAAAC,EAAAC,cAAA,OAAKqB,UAAU,iBACXvB,EAAAC,EAAAC,cAAA,OAAKqB,UAAU,gBAAgBxB,EAAMS,KAAKiB,MAAMQ,aAAaE,QAAQC,MAArE,KAA8ErC,EAAMS,KAAKiB,MAAMQ,aAAaI,cAAgBtC,EAAMS,KAAKiB,MAAMQ,aAAaI,cAAgBtC,EAAMS,KAAKiB,MAAMQ,aAAaK,iBAAiBF,MAAzN,KACApC,EAAAC,EAAAC,cAAA,OAAKqB,UAAU,kBAAkBxB,EAAMS,KAAKiB,MAAMQ,aAAaM,UAGvEvC,EAAAC,EAAAC,cAAA,OAAKqB,UAAU,sBAAsBxB,EAAMS,KAAKiB,MAAMQ,aAAaO,aACnExC,EAAAC,EAAAC,cAAA,OAAKqB,UAAU,iBACXvB,EAAAC,EAAAC,cAAA,OAAKuC,IAAI,GAAGT,IAAKjC,EAAMS,KAAKiB,MAAMQ,aAAaS,aAEnD1C,EAAAC,EAAAC,cAAA,WACIF,EAAAC,EAAAC,cAAA,OAAKqB,UAAU,kBAjC3B,SAAyBoB,EAASC,GAE9B,IADA,IAAIC,EAAS,GACLC,EAAI,EAAGA,EAAIH,EAAQI,OAAQD,IAC/BD,EAAOG,KACHhD,EAAAC,EAAAC,cAAA,OAAK+C,IAAKH,EAAGd,IAAgB,iBAAXY,EAA4BD,EAAQG,GAAGI,OAAO,GAAGC,IAAOR,EAAQG,GAAGI,OAAO,GAAGC,IAAM,IAAKV,IAAI,MAGtH,OAAOI,EA4BKO,CAAgBrD,EAAMS,KAAKiB,MAAMQ,aAAaE,QAAQtB,SAAUd,EAAMS,KAAKiB,MAAMmB,UAIzF5C,EAAAC,EAAAC,cAACmD,EAAApD,EAAD,KACID,EAAAC,EAAAC,cAACyB,EAAA1B,EAAD,CAAQqD,UAAU,IAAIC,OAAO,SAASC,KAAMzD,EAAMS,KAAKiB,MAAMQ,aAAaE,QAAQgB,IAAKzC,OAAQV,EAAAC,EAAAC,cAACuD,EAAAxD,EAAD,MAAuB2B,KAAK,KAAKC,KAAK,aAArI,+CAEJ7B,EAAAC,EAAAC,cAAA,qCC1CRwD,IAAMC,OACN,IACMC,EADcC,EAAQ,KACGC,MAAM9C,OAAO+C,SAASC,MA6ItCC,cA1IX,SAAAA,EAAYlE,GAAO,IAAAmE,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAA3D,KAAAyD,IACfC,EAAAC,OAAAE,EAAA,EAAAF,CAAA3D,KAAA2D,OAAAG,EAAA,EAAAH,CAAAF,GAAAM,KAAA/D,KAAMT,KA0EVyE,OAAS,WACL,IAAMvD,EAAUiD,EAAKzC,MAAMR,QACvBA,EAAQ8B,OAAS,IACjB9B,EAAQwD,MACRP,EAAKQ,mBACLR,EAAKS,SAAS,CAAC1D,QAASA,EAAS2D,YAAa3D,EAAQA,EAAQ8B,OAAS,GAAI8B,OAAQ,SA9EvFX,EAAKzC,MAAQ,CACTmD,YAAa,OACb3D,QAAS,CAAC,QACV2B,OAAQ,aACRiC,OAAQ,KACRnD,WAAY,IAEZO,aAAc,IAGlBiC,EAAKY,YAAcZ,EAAKY,YAAYC,KAAjBZ,OAAAa,EAAA,EAAAb,QAAAa,EAAA,EAAAb,CAAAD,KAZJA,wEAeV5C,GACL,IAAI2D,EAAO3D,EAAE4D,cAAc9E,GACvBoB,EAAQF,EAAE4D,cAAc1D,MAC5BhB,KAAKmE,SAALR,OAAAgB,EAAA,EAAAhB,CAAA,GAAgBc,EAAOzD,2CAGZ4D,EAAU1D,GAAY,IAAA2D,EAAA7E,KACjCA,KAAKmE,SAAS,CAACE,OAAQ7E,EAAAC,EAAAC,cAACoF,EAAA,EAAD,QACvB,IAAIC,EAA4C,qBAAf7D,EAA6BA,EAAalB,KAAKiB,MAAMC,WACtF8D,MAAM,iEAAmED,GACxEE,KAAK,SAAAC,GAAI,OAAIA,EAAKC,SAClBF,KAAK,SAAAC,GACyB,IAAxBA,EAAKE,SAASC,OACbR,EAAKV,SAAS,CAAC1C,aAAcyD,EAAKE,SAASE,MAAM,KAC9CV,EACCC,EAAKU,SAAS,YAEdV,EAAKV,SAAS,CAACE,OAAQ,QAG3BQ,EAAKW,WAAW,8PAOxBxF,KAAKmE,SAAS,CAAEE,OAAQ,0CAGjBoB,GACPzF,KAAKmE,SAAS,CAACE,OACX7E,EAAAC,EAAAC,cAACoF,EAAA,EAAD,CACAY,cAAc,WACdC,QAAS,CAAC,CACR/D,MAAO,uCACPgE,WAAW,EACXvE,KAAM,WAERwE,QAAS7F,KAAKsE,aAEd9E,EAAAC,EAAAC,cAAA,kDACAF,EAAAC,EAAAC,cAAA,SAAI+F,uCAKHK,GACLtF,OAAOC,QAAQsF,UAAU,CAACC,MAAOF,GAAOA,GACxC9F,KAAKmE,SAAS,CACV1D,QAAO,GAAAwF,OAAAtC,OAAAuC,EAAA,EAAAvC,CAAM3D,KAAKiB,MAAMR,SAAjB,CAA0BqF,IACjC1B,YAAa0B,EACbzB,OAAQ,wCAIP8B,GACLC,IAAQC,KAAK,mBAAoB,CAACZ,KAAMU,+CAaxCnG,KAAKmE,SAAS,CACVjD,WAAY,kDAIA,IAAAoF,EAAAtG,KAChBoG,IAAQG,UAAU,SAAAC,GAA+B,IAAAC,EAAAD,EAA5BE,OAAUC,EAAkBF,EAAlBE,KAAMzB,EAAYuB,EAAZvB,KAC7B,yBAATyB,GACSL,EAAKM,UAAU1B,EAAK9C,UAG5B5B,OAAOqG,iBAAiB,WAAY,kBAAMP,EAAKtC,WAC5CZ,EAAWlC,aACVlB,KAAKmE,SAAS,CAACjD,WAAYkC,EAAWlC,aACtClB,KAAKC,gBAAe,EAAMmD,EAAWlC,iDAIV,IAAzBkB,EAAyB0E,UAAAvE,OAAA,QAAAwE,IAAAD,UAAA,GAAAA,UAAA,GAAhB,eACfE,QAAQC,IAAI7E,GACE,iBAAXA,GAAwC,iBAAXA,GAC5BpC,KAAKmE,SAAS,CAAC/B,OAAQ,iBACvBgE,IAAQC,KAAK,0BAA2B,CAACa,iBAAoB,OAAQC,iBAAoB,UAC3E,eAAX/E,GAAsC,gBAAXA,IAC9BpC,KAAKmE,SAAS,CAAC/B,OAAQ,eACvBgE,IAAQC,KAAK,0BAA2B,CAACa,iBAAoB,QAASC,iBAAoB,2CAQ9F,OACI3H,EAAAC,EAAAC,cAACoF,EAAA,EAAD,CAAgBsC,WAAW,EAAMhF,OAAQpC,KAAKiB,MAAMmB,QACpD5C,EAAAC,EAAAC,cAACoF,EAAA,EAAD,CACIV,YAAapE,KAAKiB,MAAMmD,YACxB3D,QAAST,KAAKiB,MAAMR,QACpB4G,YAAarH,KAAKgE,OAClBK,OAAQrE,KAAKiB,MAAMoD,OACnBiD,QAAQ,GAER9H,EAAAC,EAAAC,cAACoF,EAAA,EAAD,CAAOlF,GAAG,WACNJ,EAAAC,EAAAC,cAACoF,EAAA,EAAD,CAAS1D,KAAK,QAAQE,MAAO,CAACiG,SAAU,WAAYC,IAAK,QAE7DhI,EAAAC,EAAAC,cAAC+H,EAAD,CAAM7H,GAAG,OAAOI,KAAMA,OACtBR,EAAAC,EAAAC,cAACgI,EAAD,CAAU9H,GAAG,WAAWI,KAAMA,gBApI5B2H,IAAMC,4BCPxBxB,IAAQC,KAAK,eAAgB,IAC7B,IAAMwB,EAAOC,SAASC,eAAe,QAClCC,gBAAeC,KACdC,IAAwBL,GAE5BM,IAASC,OAAO5I,EAAAC,EAAAC,cAAC2I,EAAD,MAASR","file":"static/js/main.0036c28d.chunk.js","sourcesContent":["import React from 'react';\n\nimport Panel from '@vkontakte/vkui/dist/components/Panel/Panel';\nimport PanelHeaderSimple from '@vkontakte/vkui/dist/components/PanelHeaderSimple/PanelHeaderSimple';\nimport Cell from '@vkontakte/vkui/dist/components/Cell/Cell';\n\nimport Icon28SmileOutline from '@vkontakte/icons/dist/28/smile_outline';\n\nconst home = props => (\n    <Panel id={props.id}> \n        <PanelHeaderSimple>\n            Инструменты\n        </PanelHeaderSimple>\n        <Cell onClick={() => props.this.getInfoSticker(true)} before={<Icon28SmileOutline fill=\"#FCA114\"/>}>Стикеры</Cell>\n    </Panel>\n);\n  \nexport default home;","import React from 'react';\n\nimport Panel from '@vkontakte/vkui/dist/components/Panel/Panel';\nimport PanelHeaderSimple from '@vkontakte/vkui/dist/components/PanelHeaderSimple/PanelHeaderSimple';\nimport PanelHeaderBack from '@vkontakte/vkui/dist/components/PanelHeaderBack/PanelHeaderBack';\nimport Input from '@vkontakte/vkui/dist/components/Input/Input';\nimport Button from '@vkontakte/vkui/dist/components/Button/Button';\nimport Div from '@vkontakte/vkui/dist/components/Div/Div';\n\nimport Icon24ShareOutline from '@vkontakte/icons/dist/24/share_outline';\n\nfunction stickers_scroll(sticker, scheme) {\n    var result = []\n    for(let i = 0; i < sticker.length; i++) {\n        result.push(\n            <img key={i} src={scheme === \"bright_light\" ? sticker[i].images[1].url :  sticker[i].images[1].url + \"b\"} alt=\"\"/>\n        )\n    }\n    return(result)\n}\n\nconst stickers = props => (\n    <Panel id={props.id}> \n        <PanelHeaderSimple\n            left={<PanelHeaderBack onClick={() => window.history.back()}/>}\n        >\n            Stickers\n        </PanelHeaderSimple>\n        <Input placeholder=\"Введите id стикера\" id=\"sticker_id\" onChange={(e) => props.this.onChange(e)} className=\"sticker_input\" value={props.this.state.sticker_id}/>\n        <Button onClick={() => props.this.getInfoSticker()} className=\"sticker_input\" size=\"xl\" mode=\"secondary\">Загрузить</Button>\n        <div style={{width: \"100%\"}}>\n            <img className=\"sticker_left\" src={\n                props.this.state.sticker_info.photo_140\n            }/>\n            <div className=\"sticker_right\">\n                <div className=\"sticker_name\">{props.this.state.sticker_info.product.title} ({props.this.state.sticker_info.price_buy_str ? props.this.state.sticker_info.price_buy_str : props.this.state.sticker_info.purchase_details.title })</div>\n                <div className=\"sticker_author\">{props.this.state.sticker_info.author}</div>\n            </div>\n        </div>\n        <div className=\"sticker_decription\">{props.this.state.sticker_info.description}</div>\n        <div className=\"sticker_image\">\n            <img alt=\"\" src={props.this.state.sticker_info.photo_592}/>\n        </div>\n        <div>\n            <div className=\"sticker_scroll\">\n                {\n                stickers_scroll(props.this.state.sticker_info.product.stickers, props.this.state.scheme)\n                }\n            </div>\n        </div>\n        <Div>\n            <Button component=\"a\" target=\"_blank\" href={props.this.state.sticker_info.product.url} before={<Icon24ShareOutline/>} size=\"xl\" mode=\"secondary\">Перейти</Button>\n        </Div>\n        <br/>\n    </Panel>\n);\n  \nexport default stickers;","import React from 'react';\nimport connect from '@vkontakte/vkui-connect';\nimport {View, ConfigProvider, ScreenSpinner, Spinner, Panel, Alert} from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css'; \n\nimport Home from './panels/home'\nimport Stickers from './panels/stickers'\n\nimport eruda from 'eruda';\nimport './css/style.css'\n\neruda.init()\nconst queryString = require('query-string');\nconst parsedHash = queryString.parse(window.location.hash);\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            activePanel: 'home', \n            history: ['home'],\n            scheme: \"space_gray\",\n            popout: null,\n            sticker_id: 543,\n            \n            sticker_info: []\n\n        }\n        this.closePopout = this.closePopout.bind(this);\n    }\n\n    onChange(e) {\n        var name = e.currentTarget.id;\n        var value = e.currentTarget.value;\n        this.setState({[name]: value})\n    }\n\n    getInfoSticker(redirect, sticker_id) {\n        this.setState({popout: <ScreenSpinner/>})\n        var sticker_for_fetch =  typeof  sticker_id !== \"undefined\" ? sticker_id : this.state.sticker_id\n        fetch(\"https://api.xelene.me/brown_stickers/?method=al_im&sticker_id=\" + sticker_for_fetch)\n        .then(data => data.json())\n        .then(data => {\n            if(data.response.count === 1) {\n                this.setState({sticker_info: data.response.items[0]})\n                if(redirect) {\n                    this.goToPage('stickers')\n                } else {\n                    this.setState({popout: null})\n                }\n            } else {\n                this.errorAlert(\"Увы, но данного стикерпака не существует\")\n            }\n        })\n    }\n\n\n    closePopout () {\n        this.setState({ popout: null });\n    }\n\n    errorAlert(text) {\n        this.setState({popout: \n            <Alert\n            actionsLayout=\"vertical\"\n            actions={[{\n              title: 'Отмена',\n              autoclose: true,\n              mode: 'cancel'\n            }]}\n            onClose={this.closePopout}\n          >\n            <h2>Ошибка</h2>\n            <p>{text}</p>\n          </Alert>\n        })\n    }\n\n    goToPage(page) {\n        window.history.pushState({panel: page}, page);\n        this.setState({\n            history: [...this.state.history, page],\n            activePanel: page, \n            popout: null\n        })\n    }\n\n    CopyLink(link) {\n        connect.send(\"VKWebAppCopyText\", {text: link});\n    }\n\n    goBack = () => {\n        const history = this.state.history;\n        if (history.length > 1) { \n            history.pop() \n            this.setStartPosition()\n            this.setState({history: history, activePanel: history[history.length - 1], popout: null}) \n        }\n    }\n\n    setStartPosition() {\n        this.setState({\n            sticker_id: 543\n        })\n    }\n\n    componentDidMount() {\n        connect.subscribe(({ detail: { type, data }}) => { \n\t\t\tif (type === 'VKWebAppUpdateConfig') { \n                this.SetScheme(data.scheme)\n            }\n        })\n        window.addEventListener('popstate', () => this.goBack()); \n        if(parsedHash.sticker_id) {\n            this.setState({sticker_id: parsedHash.sticker_id})\n            this.getInfoSticker(true, parsedHash.sticker_id)\n        }\n    }\n\n    SetScheme(scheme = 'bright_light') {\n        console.log(scheme)\n        if(scheme === \"bright_light\" || scheme === \"client_light\"){ \n            this.setState({scheme: 'bright_light'});\n            connect.send(\"VKWebAppSetViewSettings\", {\"status_bar_style\": \"dark\", \"action_bar_color\": \"#fff\"}); \n\t    } else if(scheme === \"space_gray\" || scheme === \"client_dark\") {\n            this.setState({scheme: 'space_gray'});\n            connect.send(\"VKWebAppSetViewSettings\", {\"status_bar_style\": \"light\", \"action_bar_color\": \"#000\"});\n        }\n    }\n\n     \n    \n    render() {\n\n        return(\n            <ConfigProvider isWebView={true} scheme={this.state.scheme}> \n            <View \n                activePanel={this.state.activePanel}\n                history={this.state.history}\n                onSwipeBack={this.goBack}\n                popout={this.state.popout}\n                header={false}\n            >   \n                <Panel id=\"spinner\">\n                    <Spinner size=\"large\" style={{position: \"absolute\", top: \"0\"}}></Spinner>\n                </Panel>\n                <Home id=\"home\" this={this}/>\n                <Stickers id=\"stickers\" this={this}/>\n            </View>\n            </ConfigProvider>\n        );\n    }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport connect from '@vkontakte/vkui-connect';\nimport App from './App.js';\nimport mVKMiniAppsScrollHelper from '@vkontakte/mvk-mini-apps-scroll-helper';\nimport {platform, IOS} from '@vkontakte/vkui';\n\n\nconnect.send('VKWebAppInit', {}); // Запусааем приложение\nconst root = document.getElementById('root');\nif(platform() === IOS) {\n    mVKMiniAppsScrollHelper(root); // Добавляем скролхелпер для Safari\n}\nReactDOM.render(<App />, root); // Рендерим App.js\n\n"],"sourceRoot":""}