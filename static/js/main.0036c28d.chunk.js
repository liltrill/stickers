(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{125:function(e,t,a){e.exports=a(160)},157:function(e,t,a){},160:function(e,t,a){"use strict";a.r(t);var i=a(0),n=a.n(i),s=a(42),r=a.n(s),c=a(22),o=a.n(c),l=a(59),u=a(43),h=a(44),p=a(45),m=a(60),d=a(46),k=a(61),f=a(25),_=a(19),g=(a(138),a(28)),v=a.n(g),b=a(29),y=a.n(b),E=a(52),S=a.n(E),w=a(51),P=a.n(w),C=function(e){return n.a.createElement(v.a,{id:e.id},n.a.createElement(y.a,null,"\u0418\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u044b"),n.a.createElement(S.a,{onClick:function(){return e.this.getInfoSticker(!0)},before:n.a.createElement(P.a,{fill:"#FCA114"})},"\u0421\u0442\u0438\u043a\u0435\u0440\u044b"))},j=a(54),O=a.n(j),N=a(55),A=a.n(N),V=a(33),x=a.n(V),I=a(56),W=a.n(I),B=a(53),K=a.n(B);var T=function(e){return n.a.createElement(v.a,{id:e.id},n.a.createElement(y.a,{left:n.a.createElement(O.a,{onClick:function(){return window.history.back()}})},"Stickers"),n.a.createElement(A.a,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 id \u0441\u0442\u0438\u043a\u0435\u0440\u0430",id:"sticker_id",onChange:function(t){return e.this.onChange(t)},className:"sticker_input",value:e.this.state.sticker_id}),n.a.createElement(x.a,{onClick:function(){return e.this.getInfoSticker()},className:"sticker_input",size:"xl",mode:"secondary"},"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"),n.a.createElement("div",{style:{width:"100%"}},n.a.createElement("img",{className:"sticker_left",src:e.this.state.sticker_info.photo_140}),n.a.createElement("div",{className:"sticker_right"},n.a.createElement("div",{className:"sticker_name"},e.this.state.sticker_info.product.title," (",e.this.state.sticker_info.price_buy_str?e.this.state.sticker_info.price_buy_str:e.this.state.sticker_info.purchase_details.title,")"),n.a.createElement("div",{className:"sticker_author"},e.this.state.sticker_info.author))),n.a.createElement("div",{className:"sticker_decription"},e.this.state.sticker_info.description),n.a.createElement("div",{className:"sticker_image"},n.a.createElement("img",{alt:"",src:e.this.state.sticker_info.photo_592})),n.a.createElement("div",null,n.a.createElement("div",{className:"sticker_scroll"},function(e,t){for(var a=[],i=0;i<e.length;i++)a.push(n.a.createElement("img",{key:i,src:"bright_light"===t?e[i].images[1].url:e[i].images[1].url+"b",alt:""}));return a}(e.this.state.sticker_info.product.stickers,e.this.state.scheme))),n.a.createElement(W.a,null,n.a.createElement(x.a,{component:"a",target:"_blank",href:e.this.state.sticker_info.product.url,before:n.a.createElement(K.a,null),size:"xl",mode:"secondary"},"\u041f\u0435\u0440\u0435\u0439\u0442\u0438")),n.a.createElement("br",null))},z=a(57),L=a.n(z);a(157);L.a.init();var J=a(158).parse(window.location.hash),D=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).goBack=function(){var e=a.state.history;e.length>1&&(e.pop(),a.setStartPosition(),a.setState({history:e,activePanel:e[e.length-1],popout:null}))},a.state={activePanel:"home",history:["home"],scheme:"space_gray",popout:null,sticker_id:543,sticker_info:[]},a.closePopout=a.closePopout.bind(Object(f.a)(Object(f.a)(a))),a}return Object(k.a)(t,e),Object(p.a)(t,[{key:"onChange",value:function(e){var t=e.currentTarget.id,a=e.currentTarget.value;this.setState(Object(u.a)({},t,a))}},{key:"getInfoSticker",value:function(e,t){var a=this;this.setState({popout:n.a.createElement(_.e,null)});var i="undefined"!==typeof t?t:this.state.sticker_id;fetch("https://api.xelene.me/brown_stickers/?method=al_im&sticker_id="+i).then(function(e){return e.json()}).then(function(t){1===t.response.count?(a.setState({sticker_info:t.response.items[0]}),e?a.goToPage("stickers"):a.setState({popout:null})):a.errorAlert("\u0423\u0432\u044b, \u043d\u043e \u0434\u0430\u043d\u043d\u043e\u0433\u043e \u0441\u0442\u0438\u043a\u0435\u0440\u043f\u0430\u043a\u0430 \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442")})}},{key:"closePopout",value:function(){this.setState({popout:null})}},{key:"errorAlert",value:function(e){this.setState({popout:n.a.createElement(_.a,{actionsLayout:"vertical",actions:[{title:"\u041e\u0442\u043c\u0435\u043d\u0430",autoclose:!0,mode:"cancel"}],onClose:this.closePopout},n.a.createElement("h2",null,"\u041e\u0448\u0438\u0431\u043a\u0430"),n.a.createElement("p",null,e))})}},{key:"goToPage",value:function(e){window.history.pushState({panel:e},e),this.setState({history:[].concat(Object(l.a)(this.state.history),[e]),activePanel:e,popout:null})}},{key:"CopyLink",value:function(e){o.a.send("VKWebAppCopyText",{text:e})}},{key:"setStartPosition",value:function(){this.setState({sticker_id:543})}},{key:"componentDidMount",value:function(){var e=this;o.a.subscribe(function(t){var a=t.detail,i=a.type,n=a.data;"VKWebAppUpdateConfig"===i&&e.SetScheme(n.scheme)}),window.addEventListener("popstate",function(){return e.goBack()}),J.sticker_id&&(this.setState({sticker_id:J.sticker_id}),this.getInfoSticker(!0,J.sticker_id))}},{key:"SetScheme",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bright_light";console.log(e),"bright_light"===e||"client_light"===e?(this.setState({scheme:"bright_light"}),o.a.send("VKWebAppSetViewSettings",{status_bar_style:"dark",action_bar_color:"#fff"})):"space_gray"!==e&&"client_dark"!==e||(this.setState({scheme:"space_gray"}),o.a.send("VKWebAppSetViewSettings",{status_bar_style:"light",action_bar_color:"#000"}))}},{key:"render",value:function(){return n.a.createElement(_.b,{isWebView:!0,scheme:this.state.scheme},n.a.createElement(_.g,{activePanel:this.state.activePanel,history:this.state.history,onSwipeBack:this.goBack,popout:this.state.popout,header:!1},n.a.createElement(_.d,{id:"spinner"},n.a.createElement(_.f,{size:"large",style:{position:"absolute",top:"0"}})),n.a.createElement(C,{id:"home",this:this}),n.a.createElement(T,{id:"stickers",this:this})))}}]),t}(n.a.Component),F=a(58),M=a.n(F);o.a.send("VKWebAppInit",{});var U=document.getElementById("root");Object(_.h)()===_.c&&M()(U),r.a.render(n.a.createElement(D,null),U)}},[[125,1,2]]]);
//# sourceMappingURL=main.0036c28d.chunk.js.map